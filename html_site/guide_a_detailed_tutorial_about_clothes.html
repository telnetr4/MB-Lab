<!DOCTYPE html>
<html>
	<head>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="MobileOptimized" content="width">
        <meta name="HandheldFriendly" content="true">        
        <link href="styles/styles.css" rel="stylesheet" type="text/css" media="screen">
        <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
        <link rel="icon" href="favicon_32.png" sizes="32x32">
        <link rel="icon" href="favicon_48.png" sizes="48x48">
        <link rel="icon" href="favicon_96.png" sizes="96x96">
        <link rel="icon" href="favicon_144.png" sizes="144x144">

<meta name="description" content="Tutorial to convert a 3d mesh in a Manuel Bastioni Lab proxy" />
<title>Detailed tutorial about Clothes</title>

   </head>

<body>

<div id="header_small">
		<div id="navbar">

            <div class="centered">
                <div id="logo">
                    <a href="index.html"><img src="images/logo.png"></a>
                </div>

                <div id="logo_title">
                    <a href="index.html">Manuel Bastioni Laboratory</a>
                </div>

                <div id="menu-desktop">
                    <ul>
                        <li><a href="download.html">Download</a></li>
                        <li><a href="gallery.html">Gallery</a></li>
                        <li><a href="contacts.html">Contact</a></li>
                        <li><a href="faq.html">FAQ</a></li>
                    </ul>
                </div>

                <div id="menu-mobile">
                    <ul>
                        <li><a href="download.html">Downl.</a></li>
                        <li><a href="gallery.html">Gall.</a></li>
                        <li><a href="contacts.html">Cont.</a></li>
                        <li><a href="faq.html">FAQ</a></li>
                    </ul>
                </div>

            </div>

		</div>

    <img src="images/headerbg_small.png" alt="manuelbastionilab header image">
	<div class="separator"></div>
</div>

<div class="horizontal_section">
    <div class="centered">
        <div class="main_row">
            <p><a href="guide_manuellab_index.html">|Back to index|</a></p>


            <h1>A detailed tutorial about clothes</h1>

            <h2>Contents</h2>

                <ul>
                <li><a href="guide_a_detailed_tutorial_about_clothes.html#introduction_proxy">Introduction</a></li>
                <li><a href="guide_a_detailed_tutorial_about_clothes.html#prepare_proxy">Step 1. Prepare the proxy tailored for a base template</a></li>
                <li><a href="guide_a_detailed_tutorial_about_clothes.html#load_proxy">Step 2. Load the proxy and use it on any derived character</a></li>
                <li><a href="guide_a_detailed_tutorial_about_clothes.html#skin_intersect">Dealing with skin intersection and proxy deformations</a></li>
                <li><a href="guide_a_detailed_tutorial_about_clothes.html#edit_proxy">Edit/remove the fitting</a></li>
                </ul>

            <div class="annotation">
                <p>
                See also: a short video that shows the usage of proxy system:
                </p>

                <p>
                <a href="https://youtu.be/kayL3EgPsKQ"><img src="illustrations/news/wip160_012.png" alt=""></a>
                </p>

            </div>


            <h1><a name="introduction_proxy">Introduction</a></h1>

            <p>The proxy usage consists of two steps:</p>

            <ol>
                <li>Prepare the proxy tailored for a base template and save it.</li>
                <li>Load the proxy and use it on any derived character.</li>
            </ol>

            <h1><a name="prepare_proxy">Step 1. Prepare the proxy tailored for a base template</a></h1>


            <p>1. Open the "Utilities" in the <a href="guide_the_modelling_process.html">after-creation</a>  section of the lab.</p>

            <p><img src="illustrations/manual/proxy15.png" alt="Importing a base character"/></p>

            <p>2. Select a base template and load it with the "Import template" button. In this example the caucasian female template was loaded.</p>

            <p><img src="illustrations/manual/proxy16.png" alt="Importing a base character"/></p>


            <p>3. Import the clothes mesh (or model a new one from scratch).
            For this tutorial a standard Wavefront obj was imported,
            but you can use any format and any import technique supported by Blender.
            The algorithm handles both triangles and quads topologies.</p>

            <p><img src="illustrations/manual/proxy18.png" alt="Import wavefront obj using Blender"/></p>

            <p>4. Manually fit the proxy to character, with the usual Blender techniques (scale, rotate, edit of verts, etc).
            One of the best tool to do this is using the Blender Proportional Edit brush.</p>

            <p><img src="illustrations/manual/proxy19.png" alt="Using the proportional edit tool to fit the clothes"/></p>

            <div class="annotation">NOTE: <p>If you prefer, as alternative way, you can export the base template and fit the proxy upon it using an external software.
            In this case you can skip steps (3) and (4).</p>
            </div>

            <p>5. Save the proxy model. You can do it in two ways: </p>

            <p>A) If you want to load the proxy directly from the assets library, save the tailored cloth as .blend file
            in your library folder (the folder that you will select in the assets GUI, see  "step 2" below),
            using a filename identical to the proxy object name. For example if the proxy object is named "cloth01", the file
            must be called "cloth01.blend".</p>


            <p>B) If you want to load the proxy using generic Blender functions,
            like "append" or "import", save it as blend file or exporting it in another 3D format, as you prefer.
            </p>
            
            
            <p>6. The proxy is ready. With the lab proxy tools, it will automatically fit all characters 
            created upon the chosen base template (caucasian female, in this example). </p> 

            <h1><a name="load_proxy">Step 2. Load the proxy and use it on any derived character</a></h1>

            <p>Scenario: you have a  <a href="guide_finalize_the_character.html">finalized</a> character created with the lab, derived from caucasian female and you want to fit
            a proxy on it. You have not altered the topology of the character.</p>


            <p>The first thing is to load the proxy into the scene.</p>
            <p>If you saved it using the method (A) described above, open the "Library assets" panel and select your library folder: the
            asset will appear in the drop down menu, ready to be loaded with one click.</p>

            <p><img src="illustrations/manual/proxy29.png" alt="The assets library panel"/></p>


            <div class="annotation">NOTE: <p>If selecting the assets nothing happens, probably the blend name doesn't match the object name</p></div>

             <p>If you saved it using the method (B) you have to use the blender built-in functions under File menu: import or append, depending
             the file format you used to store the proxy.</p>


            <p>For this example, as benchmark, a very muscular character derived from the caucasian base was loaded. Since
            the very different shape of surface, it offers an example for all typical problems that can happen during the proxy fitting.</p>



            <p>To make the benchmark even more extreme, a proxy with a skirt was used, that's the most difficult case, since there is not a direct relation
            between body and proxy. Trousers would be simpler since the algorithm can easily recognize what part of the proxy must be linked
            with the right thigh and what part must be linked with left tight.</p>

            <p>Selecting both the proxy object and the character, the "Proxy fitting" section will show the fitting tools: the parameters "Offset" and "Influence",
            the option "Add mask vertgroup" and the buttons "Fit proxy" and "Remove fitting". </p>

            <p><img src="illustrations/manual/proxy14.png"/></p>


            <p>All the proxy tools are explained in this tutorial, anyway they are very intuitive and the basic fitting process in most of cases is very simple:</p>

            <ol>
                <li>Import or append the proxy.</li>
                <li>Select both character and proxy.</li>
                <li>Press the "Fit proxy" button. Done!</li>
            </ol>

            <p><img src="illustrations/manual/proxy20.png"/></p>

            <p>Only in case of deformations or skin intersection you will need to play with the options and parameters, as explained in the next part of the tutorial.</p>




            <h1><a name="skin_intersect">Dealing with skin intersection and proxy deformations</a></h1>




            <p>As said, the benchmark proxy used in this tutorial will show you all the possible problems
            that can occur during the process. Infact, after the first fitting, it shows a distorsion problem in the center of the skirt.</p>

            <p><img src="illustrations/manual/proxy21.png"/></p>

            <p>It can be solved with the
            "Influence" parameter,
            that controls the "magnetic
            attraction" of the skin. In this example the value was modified from the default 500 to a lower value of 20, and the deformation gone.
            This parameter works at best when the character is in rest pose (The whole proxy tool is optimized to fit the clothes in rest poses,
            but it usually works good enough for other poses too).</p>

            <p><img src="illustrations/manual/proxy22.png"/></p>

            <p>Now that the deformation is fixed, the benchmark shows another "classic" problem: the surface intersection that created "holes" in the proxy.</p>

            <p><img src="illustrations/manual/proxy23.png"/></p>

            <p>The proxy system has
            two tools to handle the
            problems of skin intersection: the offset parameter and the vertices mask.</p>


            <p>The offset is an intuitive parameter that increases the distance between the surface of the skin and the surface of proxy. In this example it was used
            an offset of 3.72 instead of the default 0.00. Pressing the fit button again with this value we notice that most of intersections gone,
             but in this hard benchmark case there is still a visible intersection around the breast.</p>

            <p><img src="illustrations/manual/proxy24.png"/></p>

            <p>The vertices mask is a very powerful tool that solves practically all intersection problems that can't be fixed with the offset.
            It creates a new verts group  "mbastlab_mask"  that contains all body vertices that are too close to the proxy. Then it adds a new mask modifier
            (a standard Blender modifier) to the character stack that hides all vertices in this group.</p>

            <p>Pressing "Fit proxy" again, after enabled the "add mask vertgroup" option, will completely fix the holes.</p>

            <p><img src="illustrations/manual/proxy25.png"  alt=""/></p>

            <p>If you remove the clothes
            you will notice that the part
            of body closer to the proxy is
            hidden.</p>

            <p><img src="illustrations/manual/proxy26.png"  alt=""/></p>

            <p>Anyway it's just a non-destructive modifier: you can always enable/disable it, or even edit manually
            the vertices in the "mbastlab_mask" group, to improve the mask.</p>

            <p><img src="illustrations/manual/proxy27.png"  alt=""/></p>

            <h1><a name="edit_proxy">Edit/remove the fitting</a></h1>

            <p>After the fitting process, if you try to enter in edit mode and manually move the proxy vertices, you will notice that they
            are "locked". This happens because you are trying to edit a basis shapekey.</p>

            <p>When a proxy is fitted to the body, the lab creates automatically two shapekeys:</p>
            <ol>
                <li>The "Basis" to store the original shape of the proxy.</li>
                <li>The "mbastlab_proxyfit" to store the current fitted shape of the proxy.</li>
            </ol>
            <p>As usual the shapekeys are listed in the Blender property panel, data tab:</p>

            <p><img src="illustrations/manual/proxy28.png"  alt=""/></p>

            <p>So, if you want to manually adjust the fitting, you have to select the proxyfit shapekey and then
            proceed with the regular edit mode.</p>

            <p>In case you want to edit the basis key, you have first to remove all the keys, pressing the lab button "Remove fitting".
            Alternatively you can remove the keys manually directly from the Blender panel, but you have to remember to delete them in this order: first the proxyfit and then the basis.</p>

            <p><a href="guide_manuellab_index.html">|Back to index|</a></p>
        </div>
    </div>
</div>
<div id="footer">
	<p>Copyright Manuel Bastioni 2015-2018 - Legal information <a href="legal.html"> available here</a></p>
    <p>This site <strong>does not use  cookies</strong> and <strong>does not collect data</strong>.</p>
</div>


</body></html>
